{
   "author" : "Maroš Kollár",
   "category" : "device_enhancements",
   "defaults" : {
      "description" : "__description__",
      "maxTemperature" : 25,
      "minTemperature" : 15,
      "offset" : 0,
      "title" : "__title__",
      "unitTemperature" : "celsius"
   },
   "dependencies" : [],
   "homepage" : "http://k-1.com",
   "icon" : "icon.png",
   "maturity" : "stable",
   "moduleName" : "ThermostatControl",
   "options" : {
      "definitions": {
          "setpoints" {
                     "dayofweek": {
                        "type": "array",
                        "items": {
                            "enum": [1,2,3,4,5,6,7],
                        },
                        "uniqueItems": true
                     },
                     "timeFrom": {
                         "type": "string",
                         "pattern" : "^(([01]?[0-9]|(2[0-3])):([0-5][0-9])$"
                     },
                     "timeTo": {
                         "type": "string",
                         "pattern" : "^(([01]?[0-9]|(2[0-3])):([0-5][0-9])$"
                     },
                     "presenceMode": {
                        "type": "array",
                        "items": {
                            "enum": ["home","away","vacation","night"],
                        },
                        "uniqueItems": true
                     },
                     "setpoint": {
                        "type": "number",
                        "required": true
                     }
          }
      },
      "fields" : {















         "devices" : {
            "fields" : {
               "item" : {
                  "fields" : {
                     "device" : {
                        "datasource" : "namespaces",
                        "field" : "optionLabels",
                        "optionLabels" : "namespaces:devices_thermostat:deviceName",
                        "type" : "select"
                     },
                     "maxTemperature" : {
                        "label" : "__max_temperature_label__",
                        "type" : "text"
                     },
                     "minTemperature" : {
                        "label" : "__min_temperature_label__",
                        "type" : "text"
                     },
                     /*
                     "schedule": {
                         // weekday, time-from, time-until
                            "weekdays": {
                                    "type": "checkbox",
                                    "optionLabels": ["__monday__", "__tuesday__", "__wednesday__", "__thursday__", "__friday__", "__saturday__", "__sunday__"]
                            },
                                        "time": {
                    "type": "time",
                    "maskString": "99:99",
                    "timeFormat": "__timeFormat__",
                    "timeFormatRegex": "/^(([0-1][0-9])|([2][0-3])):([0-5][0-9])$/"
            },
                     },
                     */
                     "offset" : {
                        "label" : "__offset_default_label__",
                        "type" : "text"
                     }
                  }
               }
            },
            "label" : "__devices_label__"
         },
         "maxTemperature" : {
            "label" : "__max_temperature_label__",
            "type" : "text"
         },
         "minTemperature" : {
            "label" : "__min_temperature_label__",
            "type" : "text"
         },



         "unitTemperature" : {
            "label" : "__unit_temperature_label__",
            "optionLabels" : [
               "°C",
               "°F"
            ]
         },
         "defaultTemperature": {
            "label": "__default_temperature_label__"
         }
      }
   },
   "repository" : {
      "source" : "https://github.com/maros/Zway-ThermostatControl",
      "type" : "git"
   },
   "schema" : {
      "definitions": {
          "limit" {
              "type": "object",
              "properties": {
                  "maxTemperature" : {
                      "type" : "number",
                      "minimum": 35,
                      "min": 10
                  },
                  "minTemperature" : {
                      "type" : "number",
                      "minimum": 35,
                      "min": 10
                  }
              }
          },
          "setpoints" {
              "type": "array",
              "items": {
                  "type": "object",
                  "properties": {
                     "dayofweek": {
                        "type": "array",
                        "items": {
                            "enum": [1,2,3,4,5,6,7],
                        },
                        "uniqueItems": true
                     },
                     "timeFrom": {
                         "type": "string",
                         "pattern" : "^(([01]?[0-9]|(2[0-3])):([0-5][0-9])$"
                     },
                     "timeTo": {
                         "type": "string",
                         "pattern" : "^(([01]?[0-9]|(2[0-3])):([0-5][0-9])$"
                     },
                     "presenceMode": {
                        "type": "array",
                        "items": {
                            "enum": ["home","away","vacation","night"],
                        },
                        "uniqueItems": true
                     },
                     "setpoint": {
                        "type": "number",
                        "required": true
                     }
                  },
                  "dependencies": {
                     "timeFrom": ["timeTo"],
                     "timeTo": ["timeFrom"]
                  }
              }
          }
      },
      "properties" : {
          "unitTemperature" : {
              "enum" : [
                 "celsius",
                 "fahrenheit"
              ],
              "required" : true,
              "type" : "select"
           },
           "limit": {
               "$ref": "#/definitions/limit"
           },
           "defaultTemperature": {
               "type" : "number",
               "required": true
           },
           "globalSetpoints": {
               "$ref": "#/definitions/setpoints"
           },
           "zones": {
               "type": "array",
               "items":  {
                    "type": "object",
                    "properties": {
                        "devices": {
                            "items":  {
                                "required": true,
                                "datasource": "namespaces",
                                "field": "enum",
                                "enum" : "namespaces:devices_thermostat:deviceName"
                            },
                            "type": "array",
                            "minItems": 1,
                            "uniqueItems": true
                        },
                        "limit": {
                            "$ref": "#/definitions/limit"
                        },
                        "setpoints": {
                            "$ref": "#/definitions/setpoints"
                        }
                    }
               },  
               "minItems": 1
           }
      },
      "required" : true,
      "type" : "object"
   },
   "singleton" : false,
   "version" : "1.0.0"
}
